<!-- Profile card component for displaying profiles in grids or lists -->
{% if include.profile %}
  {% assign profile = include.profile %}
  <div class="profile-card">
    {% if profile.image %}
      <div class="profile-card-image">
        <a href="{{ profile.url }}">
          <img src="/assets/images/profiles/{{ profile.image }}" alt="{{ profile.name }}" class="profile-card-portrait">
        </a>
      </div>
    {% endif %}
    
    <div class="profile-card-content">
      <h3 class="profile-card-name">
        <a href="{{ profile.url }}">{{ profile.name }}</a>
      </h3>
      
      {% if profile.headline %}
        <p class="profile-card-title">{{ profile.headline }}</p>
      {% endif %}
      
      {% if profile.excerpt %}
        <p class="profile-card-excerpt">{{ profile.excerpt | strip_html | truncatewords: 20 }}</p>
      {% endif %}
      
      {% if profile.social %}
        <div class="profile-card-social">
          {% if profile.social.x %}
            {% if profile.social.x contains "://" %}{% assign x_url = profile.social.x %}{% else %}{% assign x_url = "https://x.com/" | append: profile.social.x %}{% endif %}
            <a href="{{ x_url }}" class="social-icon" title="X" target="_blank">
              <i class="fab fa-x-twitter"></i>
            </a>
          {% endif %}
          {% if profile.social.mastodon %}
            <a href="{{ profile.social.mastodon }}" class="social-icon" title="Mastodon" target="_blank" rel="me">
              <i class="fab fa-mastodon"></i>
            </a>
          {% endif %}
          {% if profile.social.linkedin %}
            {% if profile.social.linkedin contains "://" %}{% assign linkedin_url = profile.social.linkedin %}{% else %}{% assign linkedin_url = "https://linkedin.com/in/" | append: profile.social.linkedin %}{% endif %}
            <a href="{{ linkedin_url }}" class="social-icon" title="LinkedIn" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          {% endif %}
          {% if profile.social.github %}
            {% if profile.social.github contains "://" %}{% assign github_url = profile.social.github %}{% else %}{% assign github_url = "https://github.com/" | append: profile.social.github %}{% endif %}
            <a href="{{ github_url }}" class="social-icon" title="GitHub" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          {% endif %}
          {% if profile.social.facebook %}
            {% if profile.social.facebook contains "://" %}{% assign facebook_url = profile.social.facebook %}{% else %}{% assign facebook_url = "https://www.facebook.com/" | append: profile.social.facebook %}{% endif %}
            <a href="{{ facebook_url }}" class="social-icon" title="Facebook" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
          {% endif %}
          {% if profile.social.website %}
            <a href="{{ profile.social.website }}" class="social-icon" title="Website" target="_blank">
              <i class="fas fa-globe"></i>
            </a>
          {% endif %}
          {% if profile.social.sessionize %}
            <a href="{{ profile.social.sessionize }}" class="social-icon" title="Sessionize" target="_blank">
              <i class="fas fa-microphone"></i>
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      {% if profile.roles %}
        <div class="profile-card-roles">
          {% for role in profile.roles %}
            <span class="profile-card-role">{{ role }}</span>
          {% endfor %}
        </div>
      {% endif %}
      
      {% if profile.events %}
        <div class="profile-card-events">
          {% for event in profile.events %}
            <span class="profile-card-event">{{ event }}</span>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
{% endif %}
