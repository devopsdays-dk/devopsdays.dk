---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

<div id="main" role="main" data-event-map="{{ site.data.events | jsonify | escape }}"{% if page.role %} data-filter-role="{{ page.role }}"{% endif %}>
  <article class="page">
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}

    <div class="page__inner-wrap">
      <header>
        {% if page.title -%}
        <h1 id="page-title" class="page__title" itemprop="headline">{{ page.title }}</h1>
        {%- endif %}
      </header>

      <section class="page__content" itemprop="text">
        <div id="active-filter-display"></div>
        
        {% if page.filter %}
          <aside class="sidebar__right {% if page.filter_sticky %}sticky{% endif %}">
            <div class="speakers-filter">
              <header><h4 class="nav__title"><i class="fas fa-filter"></i> Filters</h4></header>
              
              <div class="filter-section">
                <h5>By Role</h5>
                <div class="filter-buttons roles-filter">
                  {% assign all_roles = "" | split: "" %}
                  {% for profile in site.profiles %}
                    {% for role in profile.roles %}
                      {% unless all_roles contains role %}
                        {% assign all_roles = all_roles | push: role %}
                      {% endunless %}
                    {% endfor %}
                  {% endfor %}
                  <button class="filter-btn" data-filter="role" data-value="">All</button>
                  {% for role in all_roles | sort %}
                    <button class="filter-btn" data-filter="role" data-value="{{ role }}">{{ role | capitalize }}</button>
                  {% endfor %}
                </div>
              </div>

              <div class="filter-section">
                <h5>By Event</h5>
                <div class="filter-buttons events-filter">
                  {% assign all_events = "" | split: "" %}
                  {% for profile in site.profiles %}
                    {% for event in profile.events %}
                      {% unless all_events contains event %}
                        {% assign all_events = all_events | push: event %}
                      {% endunless %}
                    {% endfor %}
                  {% endfor %}
                  <button class="filter-btn" data-filter="event" data-value="">All</button>
                  {% for event in all_events | sort %}
                    <button class="filter-btn" data-filter="event" data-value="{{ event }}">{{ event }}</button>
                  {% endfor %}
                </div>
              </div>
            </div>
          </aside>
        {% endif %}

        <div class="speakers-grid-wrapper">
          <div class="speakers-grid">
            {% for profile in site.profiles %}
              <div class="speaker-card" 
                   data-roles="{% for role in profile.roles %}{{ role }}{% unless forloop.last %},{% endunless %}{% endfor %}"
                   data-events="{% for event in profile.events %}{{ event }}{% unless forloop.last %},{% endunless %}{% endfor %}">
                <a href="{{ profile.url }}" class="speaker-card-link">
                  {% if profile.image %}
                    <div class="speaker-card-image">
                      <img src="/assets/images/profiles/{{ profile.image }}" alt="{{ profile.name }}" class="speaker-portrait">
                    </div>
                  {% endif %}
                  <div class="speaker-card-content">
                    <h4 class="speaker-card-name">{{ profile.name }}</h4>
                    {% if profile.company %}
                      <p class="speaker-card-company">{{ profile.company }}</p>
                    {% endif %}
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>

          {% if site.profiles.size == 0 %}
            <p class="no-speakers">No speakers found matching the selected filters.</p>
          {% endif %}
        </div>
      </section>
    </div>
  </article>
</div>

<script src="/assets/js/speakers-filter.js"></script>
